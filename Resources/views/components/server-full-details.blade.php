@php
    $server = $server ?? null;
    $status = $status ?? null;
    $serverId = $server ? $server->id : 0;
    $isCsGo = $status && $status->game === '730' && !empty($status->additional);
    $additionalData = $isCsGo ? json_decode($status->additional, true) : null;
    $service = $app->get('monitoring.service');
    $hasError = isset($status->online) && !$status->online;
    $trans = 'monitoring.server';
    $serverStats = $service->getServerStats($server);
@endphp

<div class="server-details csgo-details">
    <div class="server-details-header csgo-header">
        @if ($server->enabled && !$hasError)
            <div class="csgo-background">
                <img src="{{ $service->getMapPreview($status) }}"
                    alt="{{ $status->map ?? __($trans . '.player.unknown') }} map preview">
                <div class="csgo-overlay"></div>
            </div>

            <div class="csgo-team-scores">
                <div class="csgo-team-score ct">
                    <div class="team-icon ct">
                        <svg width="38" height="39" viewBox="0 0 38 39" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M11.963 1.01074V2.33186C11.963 2.65331 11.7818 2.92349 11.5442 3.14004C11.0872 3.55665 11.0106 4.39615 11.0106 4.39615C10.0472 3.99336 10.0254 6.60045 10.0254 6.60045C9.99818 6.44259 9.53011 6.15959 9.53011 6.15959C8.3708 7.5638 8.48511 9.41434 8.48511 9.41434C8.3817 9.19121 7.6796 8.39655 7.6796 8.39655C6.80329 9.78989 7.18429 11.8527 7.18429 11.8527C6.79243 11.3955 6.1556 11.0798 6.1556 11.0798C5.56781 12.9467 6.29712 14.9115 6.29712 14.9115C5.51336 14.106 4.71874 13.7903 4.71874 13.7903C4.60443 15.9946 5.23036 16.8655 5.23036 16.8655C4.17447 16.0218 3.14578 15.7062 3.14578 15.7062C3.02602 17.9322 4.17447 18.8085 4.17447 18.8085L2.98795 18.6779C2.88454 19.9025 4.10916 21.0074 4.10916 21.0074H2.62326C2.72668 22.4932 5.21402 23.756 5.21402 23.756C4.38129 23.8376 3.72816 24.3329 3.72816 24.3329C4.23978 25.084 5.85625 25.4759 5.85625 25.4759C4.4466 25.4922 4.01661 26.129 4.01661 26.129C4.71626 26.7805 6.00114 27.031 7.07262 27.1215C7.85973 27.1879 8.38909 27.9727 8.12815 28.7183C8.12258 28.7342 8.11708 28.75 8.11164 28.7658C7.82402 29.602 6.78467 29.8747 6.13347 29.2765C5.67633 28.8565 5.27392 28.4926 5.19226 28.4367C4.97998 28.2898 2.42734 26.3522 2.42734 26.3522L3.2764 26.0528C3.2764 26.0528 2.98795 25.7752 2.33482 25.4541C1.68713 25.1275 1.70889 24.2295 1.70889 24.2295L3.11858 23.9519C3.02602 23.756 2.41644 23.4185 1.68713 22.8851C0.957787 22.3518 0.789062 21.0237 0.789062 21.0237H2.18241C2.18241 21.0237 1.89396 20.5121 1.36055 20.1257C0.827168 19.7338 0.876163 18.5963 0.876163 18.5963H2.40013C2.40013 18.5963 2.26951 17.8452 1.76333 17.1648C1.25713 16.4899 1.24082 14.9115 1.24082 14.9115C2.06268 15.483 2.59606 15.3415 2.59606 15.3415C2.49243 15.1115 2.40547 14.8911 2.33285 14.6808C2.00849 13.7419 2.92968 12.8353 3.87178 13.1503C4.05941 13.213 4.15812 13.2079 4.15812 13.2079C3.89861 12.7186 3.78547 12.0188 3.74653 11.3265C3.69335 10.381 4.70032 9.75407 5.54017 10.1917C5.62918 10.2381 5.68209 10.2634 5.68209 10.2634C5.44261 7.68356 6.46584 6.27387 6.46584 6.27387C6.81963 7.17194 7.53263 7.5638 7.53263 7.5638C7.35301 5.63708 8.3708 4.21653 8.3708 4.21653C8.69194 4.39615 9.03484 5.47925 9.03484 5.47925C9.18721 5.29963 9.30697 5.21797 9.34508 4.12401C9.38318 3.03001 10.3465 2.55105 10.3465 2.55105V3.77567C10.6459 3.47087 10.8037 2.62725 10.9616 2.01222C11.1194 1.40264 11.963 1.01074 11.963 1.01074Z"
                                fill="#2196F3" />
                            <path
                                d="M25.6992 1.01074V2.33186C25.6992 2.65331 25.8805 2.92349 26.1181 3.14004C26.5751 3.55665 26.6517 4.39615 26.6517 4.39615C27.6151 3.99336 27.6368 6.60045 27.6368 6.60045C27.6641 6.44259 28.1321 6.15959 28.1321 6.15959C29.2915 7.5638 29.1771 9.41434 29.1771 9.41434C29.2806 9.19121 29.9827 8.39655 29.9827 8.39655C30.859 9.78989 30.478 11.8527 30.478 11.8527C30.8698 11.3955 31.5067 11.0798 31.5067 11.0798C32.0945 12.9467 31.3651 14.9115 31.3651 14.9115C32.1489 14.106 32.9435 13.7903 32.9435 13.7903C33.0578 15.9946 32.4319 16.8655 32.4319 16.8655C33.4878 16.0218 34.5165 15.7062 34.5165 15.7062C34.6362 17.9322 33.4878 18.8085 33.4878 18.8085L34.6743 18.6779C34.7777 19.9025 33.5531 21.0074 33.5531 21.0074H35.039C34.9356 22.4932 32.4482 23.756 32.4482 23.756C33.281 23.8376 33.9341 24.3329 33.9341 24.3329C33.4225 25.084 31.806 25.4759 31.806 25.4759C33.2157 25.4922 33.6457 26.129 33.6457 26.129C32.946 26.7805 31.6611 27.031 30.5896 27.1215C29.8025 27.1879 29.2732 27.9727 29.5341 28.7183C29.5397 28.7342 29.5452 28.75 29.5506 28.7658C29.8382 29.602 30.8776 29.8747 31.5288 29.2765C31.9859 28.8565 32.3883 28.4926 32.47 28.4367C32.6823 28.2898 35.2349 26.3522 35.2349 26.3522L34.3859 26.0528C34.3859 26.0528 34.6743 25.7752 35.3274 25.4541C35.9751 25.1275 35.9534 24.2295 35.9534 24.2295L34.5437 23.9519C34.6362 23.756 35.2458 23.4185 35.9751 22.8851C36.7045 22.3518 36.8732 21.0237 36.8732 21.0237H35.4799C35.4799 21.0237 35.7683 20.5121 36.3017 20.1257C36.8351 19.7338 36.7861 18.5963 36.7861 18.5963H35.2621C35.2621 18.5963 35.3928 17.8452 35.8989 17.1648C36.4051 16.4899 36.4214 14.9115 36.4214 14.9115C35.5996 15.483 35.0662 15.3415 35.0662 15.3415C35.1698 15.1115 35.2568 14.8911 35.3294 14.6808C35.6538 13.7419 34.7326 12.8353 33.7905 13.1503C33.6029 13.213 33.5041 13.2079 33.5041 13.2079C33.7636 12.7186 33.8768 12.0188 33.9157 11.3265C33.9689 10.381 32.9619 9.75407 32.1221 10.1917C32.0331 10.2381 31.9802 10.2634 31.9802 10.2634C32.2197 7.68356 31.1964 6.27387 31.1964 6.27387C30.8426 7.17194 30.1296 7.5638 30.1296 7.5638C30.3093 5.63708 29.2915 4.21653 29.2915 4.21653C28.9703 4.39615 28.6274 5.47925 28.6274 5.47925C28.475 5.29963 28.3553 5.21797 28.3172 4.12401C28.2791 3.03001 27.3157 2.55105 27.3157 2.55105V3.77567C27.0164 3.47087 26.8585 2.62725 26.7007 2.01222C26.5429 1.40264 25.6992 1.01074 25.6992 1.01074Z"
                                fill="#2196F3" />
                            <path
                                d="M32.494 23.1298C33.7295 22.6889 34.3554 21.4643 34.3554 21.4643H32.4559L34.1486 19.2001L31.8572 19.8478C31.8572 19.8478 32.0749 19.2654 32.924 18.6395C33.7731 18.0136 33.9255 16.5931 33.9255 16.5931L31.5034 17.9102C31.5034 17.9102 31.7919 16.8271 32.0749 16.4352C32.3634 16.0433 32.5212 14.5847 32.5212 14.5847L30.0176 16.5659C30.072 16.0433 30.1101 16.0324 30.6816 14.9112C31.2585 13.79 31.0735 12.0429 31.0735 12.0429C30.4748 12.9192 29.5876 13.2839 29.5876 13.2839L29.8216 12.0865C30.2516 10.274 29.7182 9.44129 29.7182 9.44129L28.5752 10.9761C28.5752 10.9761 28.4664 10.8836 28.4446 9.21815C28.4174 7.55267 28.0636 7.10636 28.0636 7.10636C27.8949 7.39481 27.1656 8.04795 27.1656 8.04795C27.3234 6.44233 26.8608 5.17964 26.8608 5.17964C26.6703 5.63137 26.0825 5.88175 26.0825 5.88175L25.9137 3.79716C25.5654 4.12916 25.1572 3.98223 25.1572 3.98223C25.3422 1.9412 23.9326 1.73438 23.9326 1.73438C27.9656 9.59915 29.642 17.8285 29.5223 20.4737C29.408 23.1189 28.782 23.7829 27.3724 24.1639C25.9682 24.5395 26.0444 22.5583 26.0444 22.5583C26.0444 22.5583 26.1641 21.2847 26.0063 20.3812C25.8484 19.4832 24.6619 20.0982 24.0795 20.5554C23.4917 21.0071 23.0617 20.305 23.0617 20.305C23.0617 20.305 21.7609 18.6232 21.4071 18.1279C21.0533 17.6326 21.1731 17.3496 21.6684 16.4733C22.1637 15.6025 22.1909 14.4051 22.1909 14.4051C22.1909 14.4051 21.9296 9.21815 21.9296 8.25477C21.9296 7.2914 21.1459 7.05736 21.1459 7.05736L19.1538 13.1859L19.2572 13.2948C20.4492 14.6337 18.8164 14.9983 18.8164 14.9983C18.8164 14.9983 17.1836 14.6337 18.3755 13.2948L18.4789 13.1859L16.4869 7.05736C16.4869 7.05736 15.7031 7.2914 15.7031 8.25477C15.7031 9.21815 15.4419 14.4051 15.4419 14.4051C15.4419 14.4051 15.4691 15.6025 15.9644 16.4733C16.4597 17.3496 16.5794 17.6326 16.2256 18.1279C15.8719 18.6232 14.571 20.305 14.571 20.305C14.571 20.305 14.1411 21.0071 13.5533 20.5554C12.9709 20.0982 11.7844 19.4832 11.6265 20.3812C11.4687 21.2847 11.5884 22.5583 11.5884 22.5583C11.5884 22.5583 11.6646 24.5395 10.2604 24.1639C8.85071 23.7829 8.22482 23.1189 8.11051 20.4737C7.99075 17.8285 9.66713 9.59915 13.7002 1.73438C13.7002 1.73438 12.2905 1.9412 12.4756 3.98223C12.4756 3.98223 12.0674 4.12916 11.719 3.79716L11.5503 5.88175C11.5503 5.88175 10.9625 5.63137 10.772 5.17964C10.772 5.17964 10.3094 6.44233 10.4672 8.04795C10.4672 8.04795 9.73789 7.39481 9.56916 7.10636C9.56916 7.10636 9.21536 7.55267 9.18816 9.21815C9.1664 10.8836 9.05754 10.9761 9.05754 10.9761L7.91458 9.44129C7.91458 9.44129 7.38116 10.274 7.81116 12.0865L8.0452 13.2839C8.0452 13.2839 7.15803 12.9192 6.55934 12.0429C6.55934 12.0429 6.37427 13.79 6.9512 14.9112C7.52268 16.0324 7.56078 16.0433 7.61523 16.5659L5.11155 14.5847C5.11155 14.5847 5.26938 16.0433 5.55786 16.4352C5.84089 16.8271 6.12934 17.9102 6.12934 17.9102L3.70731 16.5931C3.70731 16.5931 3.85972 18.0136 4.70879 18.6395C5.55786 19.2654 5.77558 19.8478 5.77558 19.8478L3.48417 19.2001L5.17686 21.4643H3.27734C3.27734 21.4643 3.90327 22.6889 5.13876 23.1298C6.37427 23.5761 6.5321 23.8591 6.5321 23.8591C6.5321 23.8591 5.166 24.1476 4.6979 24.4197C4.6979 24.436 4.7251 24.9422 8.60578 24.9967C8.60578 24.9967 8.05609 25.4647 6.55934 25.7097C5.13331 25.9491 5.10065 26.2049 5.10065 26.2321C5.10065 26.2321 6.17834 26.7928 9.8304 26.6621C9.8304 26.6621 9.41133 27.7561 9.01944 28.4582C8.62757 29.1658 8.11051 30.3251 7.88737 32.6546C7.6642 34.9895 7.72951 36.7856 7.72951 36.7856C7.72951 36.7856 7.88737 37.9831 8.87792 37.9831C9.86851 37.9831 10.3638 38.1899 10.6632 36.8782C10.9625 35.561 10.9081 34.1405 11.2237 32.9268C11.534 31.7184 11.915 30.3523 12.3558 29.5305C12.7365 28.8208 15.8284 24.3325 17.9164 22.0307C18.4005 21.497 19.2322 21.497 19.7164 22.0307C21.8043 24.3325 24.8962 28.8208 25.2769 29.5305C25.7178 30.3523 26.0988 31.7184 26.409 32.9268C26.7247 34.1405 26.6703 35.561 26.9696 36.8782C27.269 38.1899 27.7643 37.9831 28.7548 37.9831C29.7454 37.9831 29.9032 36.7856 29.9032 36.7856C29.9032 36.7856 29.9686 34.9895 29.7454 32.6546C29.5223 30.3251 29.0052 29.1658 28.6133 28.4582C28.2215 27.7561 27.8024 26.6621 27.8024 26.6621C31.4544 26.7928 32.5321 26.2321 32.5321 26.2321C32.5321 26.2049 32.4995 25.9491 31.0735 25.7097C29.5767 25.4647 29.027 24.9967 29.027 24.9967C32.9077 24.9422 32.9349 24.436 32.9349 24.4197C32.4668 24.1476 31.1007 23.8591 31.1007 23.8591C31.1007 23.8591 31.2585 23.5761 32.494 23.1298ZM28.401 37.7055C27.5466 37.7055 27.3071 37.9994 27.1329 35.7624C26.9587 33.52 26.2457 30.9674 24.9449 28.3603C23.9946 26.4637 21.1836 23.1902 19.722 21.5469C19.2373 21.002 18.3954 21.002 17.9107 21.5469C16.4492 23.1902 13.6381 26.4637 12.6878 28.3603C11.387 30.9674 10.674 33.52 10.4999 35.7624C10.3257 37.9994 10.0862 37.7055 9.23171 37.7055C9.23171 37.7055 9.53105 32.045 10.1896 30.1673C10.8482 28.2895 11.0224 28.2895 12.2579 26.5914C13.4879 24.8878 17.7768 19.1185 17.7768 19.1185L18.8164 20.3758L19.856 19.1185C19.856 19.1185 24.1448 24.8878 25.3749 26.5914C26.6104 28.2895 26.7846 28.2895 27.4431 30.1673C28.1017 32.045 28.401 37.7055 28.401 37.7055Z"
                                fill="#2196F3" />
                            <path
                                d="M18.6145 21.7588C18.6145 21.7588 15.904 25.1115 14.6358 26.7607C13.3677 28.4153 12.3064 30.3747 12.3064 30.3747C12.3064 30.3747 11.9145 30.9244 12.0832 31.0985C12.2519 31.2727 12.8234 30.9679 12.8234 30.9679C12.8234 30.9679 12.6275 31.7517 12.7418 31.8333C12.8506 31.9204 13.335 32.1925 13.335 32.1925C13.335 32.1925 13.5745 32.3885 14.2821 31.7299C14.9951 31.0713 16.3013 30.01 16.7912 28.9541C17.2756 27.8928 18.1247 24.453 18.1247 24.453C18.1247 24.453 18.6635 22.401 18.6145 21.7588ZM16.4973 25.4925L16.2524 25.2966L17.0633 23.9903L17.2647 24.1645L16.4973 25.4925ZM17.3627 25.966L17.0905 25.8191L17.711 24.3332L17.9396 24.4149L17.3627 25.966Z"
                                fill="#2196F3" />
                            <path
                                d="M19.4988 24.453C19.4988 24.453 20.3479 27.8928 20.8323 28.9541C21.3222 30.01 22.6284 31.0713 23.3414 31.7299C24.049 32.3885 24.2885 32.1925 24.2885 32.1925C24.2885 32.1925 24.7729 31.9204 24.8817 31.8333C24.996 31.7517 24.8001 30.9679 24.8001 30.9679C24.8001 30.9679 25.3716 31.2727 25.5403 31.0985C25.709 30.9244 25.3171 30.3747 25.3171 30.3747C25.3171 30.3747 24.2558 28.4153 22.9877 26.7607C21.7195 25.1115 19.009 21.7588 19.009 21.7588C18.96 22.401 19.4988 24.453 19.4988 24.453ZM20.3588 24.1645L20.5602 23.9903L21.3711 25.2966L21.1262 25.4925L20.3588 24.1645ZM19.6839 24.4149L19.9125 24.3332L20.533 25.8191L20.2608 25.966L19.6839 24.4149Z"
                                fill="#2196F3" />
                            <path d="M18.3941 24.4219L18.6611 24.4675L18.3941 26.2588L18.0684 26.1871L18.3941 24.4219Z"
                                fill="#2196F3" />
                            <path d="M19.0332 24.4219H19.2742L19.4566 26.2067L19.0788 26.2588L19.0332 24.4219Z"
                                fill="#2196F3" />
                        </svg>
                    </div>
                    <div class="score-value">{{ $additionalData['score_ct'] ?? 0 }}</div>
                </div>
                <div class="score-divider">:</div>
                <div class="csgo-team-score t">
                    <div class="team-icon t">
                        <svg width="38" height="39" viewBox="0 0 38 39" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path opacity="0.8"
                                d="M0.313247 14.6982C0.313247 14.6982 -0.0333205 18.0484 0.948621 19.3191C1.93056 20.5899 3.6634 22.3227 4.18325 22.7271C4.7031 23.1314 9.43953 26.6548 9.43953 26.6548C9.43953 26.6548 9.72834 27.0592 10.1327 26.7126C10.537 26.366 11.4922 26.3002 11.9099 26.8529C12.3276 27.4057 12.5009 28.5032 12.2121 28.8498C11.9233 29.1963 11.6922 28.9653 11.6922 28.9653C11.6922 28.9653 11.4612 28.8498 11.3457 28.9653C11.2301 29.0808 11.1724 29.5429 11.5767 29.6584C11.981 29.7739 12.3854 29.7162 12.6164 29.5429C12.8474 29.3696 13.5983 28.5609 13.5983 28.5609C13.5983 28.5609 13.7139 28.3877 13.8871 28.5609C14.0604 28.7342 14.8691 29.6584 14.8691 29.6584L15.9088 30.6404L18.6236 32.9508L21.4539 34.9147L23.0712 35.8966L23.36 36.0699C23.36 36.0699 23.591 36.1277 23.591 36.532C23.591 36.9363 23.5333 37.1674 23.5333 37.1674C23.5333 37.1674 23.5333 37.6872 23.9376 37.5139C24.3419 37.3407 25.2661 36.6475 25.6127 36.2432C25.9593 35.8389 26.6524 34.9147 26.8257 34.3371C26.999 33.7595 26.8257 33.4707 26.4213 33.5284C26.017 33.5862 25.6704 33.7017 25.6704 33.7017C25.6704 33.7017 25.4972 33.7595 25.2661 33.5862C25.0351 33.4129 22.6669 31.2757 22.6669 31.2757L20.8763 29.7739L19.49 28.792L17.064 27.2324L16.3131 26.7703L15.9088 26.5971L15.6777 26.5393C15.6777 26.5393 15.4467 26.4815 15.62 26.2505C15.7933 26.0195 16.2554 25.5574 16.2554 25.5574C16.2554 25.5574 16.6019 24.9797 16.5442 24.6332C16.4864 24.2866 16.1976 23.8823 16.1976 23.8823C16.1976 23.8823 15.7933 23.5935 15.62 23.7668C15.4467 23.94 15.62 24.4021 15.6777 24.4599C15.7355 24.5177 15.7355 24.7487 15.5622 24.8642C15.3889 24.9797 14.5225 25.4996 14.5225 25.4996C14.5225 25.4996 14.3492 25.5574 14.2337 25.4418C14.1182 25.3263 12.0388 23.5357 12.0388 23.5357L9.55505 21.8606L7.30236 20.4166L5.16519 18.9148L2.9125 16.9509L1.17967 15.3914L0.313247 14.6982Z"
                                fill="#FFC107" />
                            <path
                                d="M37.5774 14.7559C37.5774 14.7559 37.924 18.106 36.942 19.3768C35.9601 20.6475 34.2272 22.3803 33.7074 22.7847C33.1875 23.189 28.4511 26.7124 28.4511 26.7124C28.4511 26.7124 28.1623 27.1168 27.758 26.7702C27.3536 26.4236 26.3984 26.3578 25.9807 26.9106C25.563 27.4633 25.3898 28.5608 25.6786 28.9074C25.9674 29.2539 26.1984 29.0229 26.1984 29.0229C26.1984 29.0229 26.4295 28.9074 26.545 29.0229C26.6605 29.1384 26.7183 29.6005 26.3139 29.716C25.9096 29.8316 25.5053 29.7738 25.2742 29.6005C25.0432 29.4272 24.2923 28.6186 24.2923 28.6186C24.2923 28.6186 24.1768 28.4453 24.0035 28.6186C23.8302 28.7919 23.0215 29.716 23.0215 29.716L21.9818 30.698L19.2671 33.0084L16.4368 34.9723L14.8194 35.9543L14.5306 36.1275C14.5306 36.1275 14.2996 36.1853 14.2996 36.5896C14.2996 36.994 14.3573 37.225 14.3573 37.225C14.3573 37.225 14.3573 37.7449 13.953 37.5716C13.5487 37.3983 12.6245 36.7051 12.2779 36.3008C11.9314 35.8965 11.2382 34.9723 11.065 34.3947C10.8917 33.8171 11.065 33.5283 11.4693 33.586C11.8736 33.6438 12.2202 33.7593 12.2202 33.7593C12.2202 33.7593 12.3935 33.8171 12.6245 33.6438C12.8556 33.4705 15.2238 31.3333 15.2238 31.3333L17.0144 29.8316L18.4006 28.8496L20.8266 27.2901L21.5775 26.828L21.9818 26.6547L22.2129 26.5969C22.2129 26.5969 22.4439 26.5392 22.2706 26.3081C22.0974 26.0771 21.6353 25.615 21.6353 25.615C21.6353 25.615 21.2887 25.0374 21.3465 24.6908C21.4042 24.3442 21.693 23.9399 21.693 23.9399C21.693 23.9399 22.0974 23.6511 22.2706 23.8244C22.4439 23.9977 22.2706 24.4598 22.2129 24.5175C22.1551 24.5753 22.1551 24.8063 22.3284 24.9218C22.5017 25.0374 23.3681 25.5572 23.3681 25.5572C23.3681 25.5572 23.5414 25.615 23.6569 25.4995C23.7724 25.3839 25.8518 23.5933 25.8518 23.5933L28.3356 21.9183L30.5883 20.4742L32.7254 18.9724L34.9781 17.0085L36.711 15.449L37.5774 14.7559Z"
                                fill="#FFC107" />
                            <path
                                d="M16.5737 9.23962L18.9405 1.96289L21.2994 9.23962H28.9468L22.7602 13.7004L25.1224 20.9652L18.9405 16.5187L12.7927 20.9652L15.1297 13.745L8.94922 9.23962H16.5737Z"
                                fill="#FFC107" />
                        </svg>
                    </div>
                    <div class="score-value">{{ $additionalData['score_t'] ?? 0 }}</div>
                </div>
            </div>

            <div class="csgo-header-content">
                <h3 class="csgo-server-name">{{ $server->name }}</h3>

                <div class="csgo-header-container">
                    <div class="csgo-server-map">
                        <x-icon path="ph.regular.map-trifold" />
                        {{ $status->map ?? __($trans . '.player.unknown') }}
                    </div>
                    <div class="csgo-server-status">
                        <span class="csgo-status-indicator online"></span>
                        {{ __($trans . '.online') }}
                    </div>
                    <div class="csgo-server-ip copyable" data-tooltip="{{ __($trans . '.actions.copy_ip') }}"
                        data-copy="{{ $server->ip }}:{{ $server->port }}"
                        onclick="notyf.success('{{ __($trans . '.actions.copy_ip_success') }}')">
                        <x-icon path="ph.regular.copy" />
                        {{ $server->getConnectionString() }}
                    </div>
                    <div class="csgo-server-players">
                        <x-icon path="ph.regular.users-three" />
                        <span class="player-count">{{ $status->players }} / {{ $status->max_players }}</span>
                    </div>
                </div>
            </div>
        @else
            <div class="server-details-info">
                <div class="server-details-info-grid">
                    <div class="server-details-info-item">
                        <div class="server-details-info-item-label">{{ __($trans . '.ip') }}</div>
                        <div class="server-details-info-item-value copyable"
                            data-tooltip="{{ __($trans . '.actions.copy_ip') }}"
                            data-copy="{{ $server->ip }}:{{ $server->port }}"
                            onclick="notyf.success('{{ __($trans . '.actions.copy_ip_success') }}')">
                            {{ $server->getConnectionString() }}
                        </div>
                    </div>

                    <div class="server-details-info-item">
                        <div class="server-details-info-item-label">{{ __($trans . '.players') }}</div>
                        <div class="server-details-info-item-value">
                            <span class="player-count">0 / 0</span>
                        </div>
                    </div>

                    <div class="server-details-info-item">
                        <div class="server-details-info-item-label">{{ __($trans . '.status') }}</div>
                        <div class="server-details-info-item-status">
                            @if (!$server->enabled)
                                <span class="server-details-info-item-status-indicator inactive"></span>
                                <span>{{ __($trans . '.inactive') }}</span>
                            @elseif ($hasError)
                                <span class="server-details-info-item-status-indicator offline"></span>
                                <span>{{ __($trans . '.error') }}</span>
                            @endif
                        </div>
                    </div>
                </div>

                @if (!$server->enabled)
                    <div class="server-details-message">
                        <div class="server-details-message-text">
                            {{ __($trans . '.maintenance') }}
                        </div>
                    </div>
                @elseif ($hasError)
                    <div class="server-details-message">
                        <div class="server-details-message-text">
                            {{ __($trans . '.unavailable') }}
                        </div>
                    </div>
                @endif
            </div>
        @endif
    </div>

    @if ($server->enabled && !$hasError)
        <div class="csgo-players">
            @if ($status->players > 0 && !empty($additionalData['players']))
                @php
                    $players = $additionalData['players'];
                    $playersSteamIds = array_column($players, 'steamid');

                    try {
                        $steamInfo = steam()->getUsersInfo($playersSteamIds);
                    } catch (\Exception $e) {
                        $steamInfo = [];
                    }
                @endphp

                <div class="server-details-players-table-wrapper csgo-players-table-wrapper">
                    <table class="csgo-players-table">
                        <thead>
                            <tr>
                                <th></th>
                                <th class="text-center" data-tooltip="{{ __($trans . '.csgo.kills') }}">
                                    <span class="h5 flex-center"><x-icon path="ph.regular.sword" /></span>
                                </th>
                                <th class="text-center" data-tooltip="{{ __($trans . '.csgo.deaths') }}">
                                    <span class="h5 flex-center"><x-icon path="ph.regular.skull" /></span>
                                </th>
                                <th class="text-center" data-tooltip="{{ __($trans . '.csgo.headshots') }}">
                                    <span class="h5 flex-center"><x-icon path="ph.regular.crosshair" /></span>
                                </th>
                                <th class="text-center" data-tooltip="{{ __($trans . '.csgo.rank') }}">
                                    <span class="h5 flex-center"><x-icon path="ph.regular.crown" /></span>
                                </th>
                                <th class="text-center" data-tooltip="{{ __($trans . '.csgo.playtime') }}">
                                    <span class="h5 flex-center"><x-icon path="ph.regular.hourglass" /></span>
                                </th>
                                <th class="text-center">
                                </th>
                            </tr>
                        </thead>
                        <tbody id="playerTableBody-{{ $serverId }}">
                            @foreach ($players as $player)
                                @php
                                    $playerSteamInfo = $steamInfo[$player['steamid']] ?? null;
                                    $isT = $player['team'] == 2;
                                    $rowClass = $isT ? 't-row' : 'ct-row';
                                @endphp
                                @php
                                    $faceitInfo = null;
                                    try {
                                        if (class_exists('\Flute\Modules\Monitoring\Services\FaceitRankService')) {
                                            $faceitRankService = app()->get(
                                                '\Flute\Modules\Monitoring\Services\FaceitRankService',
                                            );
                                            $faceitInfo = $faceitRankService->getFaceitPlayerInfo(
                                                (int) $player['steamid'],
                                            );
                                        }
                                    } catch (\Exception $e) {
                                        // Faceit service not available
                                    }
                                @endphp

                                <tr class="player-row {{ $rowClass }}" data-team="{{ $isT ? 't' : 'ct' }}">
                                    <td class="player-info">
                                        <a href="{{ url('profile/search/' . $player['steamid']) }}" hx-boost="true"
                                            hx-target="#main" data-user-card="" hx-swap="outerHTML"
                                            onclick="closeModal('server-details-{{ $server->id }}')">
                                            @if ($faceitInfo && $faceitInfo['rank_image'])
                                                <div class="player-faceit-rank">
                                                    <img src="{{ $faceitInfo['rank_image'] }}"
                                                        alt="Faceit Level {{ $faceitInfo['skill_level'] }}"
                                                        loading="lazy"
                                                        data-tooltip="Faceit Level {{ $faceitInfo['skill_level'] }} ({{ $faceitInfo['faceit_elo'] }} ELO)">
                                                </div>
                                            @endif
                                            @if (isset($playerSteamInfo['avatar']))
                                                <div class="player-avatar">
                                                    <img src="{{ $playerSteamInfo['avatar'] }}"
                                                        alt="{{ $playerSteamInfo['name'] ?? $player['name'] }}">
                                                </div>
                                            @endif
                                            <div class="player-name">
                                                @if (isset($player['prime']))
                                                    <span
                                                        class="prime-indicator {{ $player['prime'] == 1 ? 'prime' : 'non-prime' }}"
                                                        data-tooltip="{{ $player['prime'] ? 'Prime' : 'Non-Prime' }}">
                                                        <svg width="512" height="540" viewBox="0 0 512 540"
                                                            fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <g clip-path="url(#clip0_2263_13)">
                                                                <path
                                                                    d="M32.4899 101.883C36.9559 97.9726 52.9591 91.4097 60.4025 88.617C-4.91285 81.356 1.08827 110.261 12.2533 125.621C13.6489 127.25 19.2314 133.58 30.3964 145.868C44.3527 161.228 55.5177 161.228 64.5893 155.642C73.6609 150.057 177.635 116.544 255.092 116.544C332.549 116.544 434.43 150.057 444.897 155.642C455.364 161.228 458.853 160.529 465.831 157.038C472.81 153.548 495.837 136.093 505.607 112.355C513.422 93.3646 490.72 88.617 478.392 88.617L450.479 89.3152C458.388 91.8752 475.601 98.6708 481.183 105.373C486.766 112.076 480.253 110.959 476.299 109.563C440.478 95.3661 346.087 66.9736 255.092 66.9736C141.348 66.9736 40.1658 107.468 35.2811 109.563C30.3964 111.657 28.3031 110.959 27.6052 110.261C26.9074 109.563 26.9074 106.77 32.4899 101.883Z" />
                                                                <path
                                                                    d="M256.488 53.0097C230.808 53.0097 156.468 66.0424 122.507 72.5587C124.601 68.3691 131.579 56.5011 144.14 40.4431C154.188 27.5966 165.074 35.0904 169.261 40.4431L186.706 57.1993C197.406 47.192 222.574 23.4074 237.647 8.32678C252.719 -6.75382 267.653 2.0432 273.235 8.32678L325.571 55.8027C327.199 53.7081 333.247 47.2847 344.412 38.3481C355.577 29.4114 365.346 36.9517 368.836 41.8389L389.072 72.5587C355.577 66.0424 282.167 53.0097 256.488 53.0097Z" />
                                                                <path
                                                                    d="M22.0221 307.147L31.7915 323.903C-3.79713 308.543 -3.79679 295.277 4.57696 276.427C11.276 261.346 51.0978 253.852 70.1714 251.99C69.9388 256.412 70.5901 271.26 75.0561 295.277C80.6386 325.299 89.7102 339.262 110.645 383.248C131.579 427.233 204.849 486.578 219.503 496.352C234.158 506.126 214.619 526.374 206.943 534.752C200.802 541.454 189.963 540.337 185.311 538.941C180.659 537.312 167.167 532.518 150.42 526.374C133.672 520.23 116.925 507.988 110.645 502.636C108.319 498.679 102.69 492.163 98.7817 497.748C94.874 503.334 100.41 510.316 103.666 513.108L142.046 534.054C132.277 534.054 108.691 533.216 92.5014 529.864C72.2648 525.675 63.8911 495.654 82.0342 478.199C100.177 460.745 123.205 485.181 128.788 490.767C134.37 496.352 152.513 510.316 163.678 513.108C172.61 515.342 170.191 510.316 167.865 507.523C166.702 506.592 161.306 502.496 149.024 493.559C133.672 482.388 100.875 450.971 72.9627 412.571C45.0501 374.171 36.6764 316.223 36.6764 299.466C36.6764 286.061 34.8155 283.176 33.8851 283.409C31.559 282.71 25.9299 282.571 22.0221 287.598C18.1144 292.625 20.3939 302.725 22.0221 307.147Z" />
                                                                <path
                                                                    d="M489.978 307.147L480.208 323.903C515.797 308.543 515.797 295.277 507.423 276.427C500.724 261.346 460.902 253.852 441.829 251.99C442.061 256.412 441.41 271.26 436.944 295.277C431.361 325.299 422.29 339.262 401.355 383.248C380.421 427.233 307.151 486.578 292.497 496.352C277.842 506.126 297.381 526.374 305.057 534.752C311.198 541.454 322.037 540.337 326.689 538.941C331.341 537.312 344.833 532.518 361.58 526.374C378.328 520.23 395.075 507.988 401.355 502.636C403.681 498.679 409.31 492.163 413.218 497.748C417.126 503.334 411.59 510.316 408.334 513.108L369.954 534.054C379.723 534.054 403.309 533.216 419.499 529.864C439.735 525.675 448.109 495.654 429.966 478.199C411.823 460.745 388.795 485.181 383.212 490.767C377.63 496.352 359.487 510.316 348.322 513.108C339.39 515.342 341.809 510.316 344.135 507.523C345.298 506.592 350.694 502.496 362.976 493.559C378.328 482.388 411.125 450.971 439.037 412.571C466.95 374.171 475.324 316.223 475.324 299.466C475.324 286.061 477.184 283.176 478.115 283.409C480.441 282.71 486.07 282.571 489.978 287.598C493.886 292.625 491.606 302.725 489.978 307.147Z" />
                                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                                    d="M86.9188 161.926C120.414 150.755 200.942 128.413 255.092 128.413C309.243 128.413 391.631 150.755 426.056 161.926C443.037 230.347 433.314 394.977 258.581 506.126C184.846 464.003 47.283 336.19 86.9188 161.926ZM101.007 175.072C131.547 164.872 204.97 144.471 254.342 144.471C303.715 144.471 378.835 164.872 410.223 175.072C425.705 237.549 416.84 387.877 257.524 489.37C190.293 450.906 64.8675 334.198 101.007 175.072Z" />
                                                                <path
                                                                    d="M296.263 226.856L308.126 234.536L298.356 247.801L304.637 253.387L257.185 321.808L207.641 249.896L213.223 245.707L203.454 232.441L213.223 223.365L162.981 186.362L167.865 247.801L181.124 240.82L189.498 258.274L194.382 255.481L245.323 330.884L197.871 404.891L174.146 373.473L162.981 378.36L145.535 348.339L157.398 341.357L135.766 293.183L124.601 295.975L118.321 259.67L130.881 255.481L128.09 208.703H118.321L120.414 180.078L140.651 173.097L142.046 183.569L194.382 174.493V162.624L227.877 157.737L229.273 171.002L280.213 170.304L280.911 157.737L315.802 162.624V171.002L362.555 182.173L369.533 173.097L394.655 182.173L397.446 207.307L384.187 211.496L382.792 253.387L394.655 255.481L387.676 293.183H372.325L357.67 338.564L369.533 348.339L347.203 378.36L337.434 372.077L313.01 410.476L264.164 333.677L315.802 262.463L319.989 264.558L329.06 247.801L341.621 255.481L349.297 189.853L296.263 226.856Z" />
                                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                                    d="M252.999 343.451L196.476 430.025L248.812 471.916C250.905 473.545 256.488 475.826 262.07 471.916C267.653 468.006 295.565 446.549 308.824 436.309L252.999 343.451ZM230.668 418.854L253.696 443.989L278.12 418.854H262.768L253.696 392.324L243.229 418.854H230.668Z" />
                                                            </g>
                                                            <defs>
                                                                <clipPath id="clip0_2263_13">
                                                                    <rect width="512" height="540" />
                                                                </clipPath>
                                                            </defs>
                                                        </svg>
                                                    </span>
                                                @endif

                                                {{ $playerSteamInfo['name'] ?? $player['name'] }}
                                            </div>
                                        </a>
                                    </td>
                                    <td class="text-center">{{ $player['kills'] ?? 0 }}</td>
                                    <td class="text-center">{{ $player['death'] ?? 0 }}</td>
                                    <td class="text-center">{{ $player['headshots'] ?? 0 }}</td>
                                    <td class="text-center">
                                        <div class="player-rank">
                                            <img src="{{ $service->getPlayerRank($player['steamid'], $serverStats) }}"
                                                alt="" loading="lazy">
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        {{ \Carbon\CarbonInterval::seconds($player['playtime'])->cascade()->forHumans(null, true) }}
                                    </td>
                                    <td class="player-ping">
                                        <span
                                            class="ping-value {{ $player['ping'] < 60 ? 'good' : ($player['ping'] < 120 ? 'medium' : 'bad') }}"
                                            data-tooltip="{{ __($trans . '.csgo.ping') }} {{ $player['ping'] ?? 0 }} ms">
                                            @if ($player['ping'] < 60)
                                                <x-icon path="ph.regular.cell-signal-full" />
                                            @elseif ($player['ping'] < 120)
                                                <x-icon path="ph.regular.cell-signal-medium" />
                                            @else
                                                <x-icon path="ph.regular.cell-signal-low" />
                                            @endif
                                        </span>
                                    </td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>
                </div>

                <div id="noPlayersFound-{{ $serverId }}" class="server-details-empty" style="display: none;">
                    {{ __($trans . '.player.no_results') }}
                </div>
            @else
                <div class="server-details-empty">
                    {{ __($trans . '.no_players') }}
                </div>
            @endif
        </div>
    @endif
</div>

<div class="modal__footer modal__footer-server-details csgo-footer">
    <x-button type="outline-primary" class="w-100" data-a11y-dialog-hide="{{ 'server-details-' . $server->id }}">
        {{ __($trans . '.actions.close') }}
    </x-button>
    @if ($server->enabled && !$hasError)
        <x-button type="success" class="w-100 csgo-connect-button"
            onclick="window.location='steam://connect/{{ $server->ip }}:{{ $server->port }}'">
            {{ __($trans . '.actions.play') }}
        </x-button>
    @endif
</div>
